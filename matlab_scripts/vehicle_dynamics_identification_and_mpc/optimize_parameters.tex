
Optimal parameter estimation problem for the vehicle dynamics. The optimization tries to find a set of model parameters, that best explain/reproduce the experiment data.

\begin{align*}
\underset{\boldsymbol{x}_k^j, \boldsymbol{p}}{\text{minimize}} && \sum_{j=1}^{n_{experiments}} \sum_{k=1}^{n_{timesteps}} E(\boldsymbol{x}_k^j - \hat{\boldsymbol{x}}_k^j) \\
\text{subject to} &&  \boldsymbol{x}_{k+1}^j = \boldsymbol{x}_k^j + \Delta t \cdot f(\boldsymbol{x}_k^j,  \hat{\boldsymbol{u}}_k^j, \boldsymbol{p}) \\
&& \quad k=1..(n_{timesteps}-1) \\
&& \quad j=1..n_{experiments} \\
\end{align*} 



\begin{center}
\begin{tabular}{ r | l }
 $\hat{\boldsymbol{x}}_k^j$ & Measured States  \\ 
 $\hat{\boldsymbol{u}}_k^j$ & Measured Inputs   \\ 
 $f$ & Vehicle dynamics model  \\ 
 $\boldsymbol{p}$ & Model parameters  \\ 
 $\Delta t}$ & Constant timestep $0.02s$ \\ 
 $E$ & Error penalty function \\ 
\end{tabular}
\end{center}

\textbf{Error penalty $E$}: Weighted quadratic error with model specific extensions. The yaw error function has a period of $2\pi$, so that a full rotation does not count as an error. This is done using $\sin(\Delta\psi/2)$. The 5th state (steering) is not measured and thus not penalized.
